# 개발 환경 설정 가이드

**프로젝트명:** SimpleBlog
**작성일:** 2025-10-17
**작성자:** 개발팀
**버전:** 1.0

---

## 📌 이 단계의 목적

### 왜 개발 환경 설정이 중요한가요?

**"모든 개발자가 동일한 환경에서 작업하자!"**

개발 환경이 다르면 "내 컴퓨터에서는 되는데요?" 문제가 발생합니다.
환경 설정 가이드는 **재현 가능한 개발 환경**을 만들기 위한 필수 문서입니다.

#### 예시로 이해하기
```
개발자 A: Java 17, MySQL 5.7 사용
개발자 B: Java 21, MySQL 8.0 사용

→ A가 작성한 코드가 B 컴퓨터에서 안 돌아감!
→ 배포 환경도 또 다르면? 대참사!
```

### PM이 꼭 알아야 할 것

#### 1. 이 문서의 역할

**개발팀 내부:**
- 신규 개발자 온보딩 시간 80% 단축
- "환경 설정 문제"로 인한 시간 낭비 방지
- 모든 개발자가 동일한 버전 사용 보장

**고객 (운영팀):**
- 개발 환경 ≈ 운영 환경 (차이 최소화)
- 배포 시 문제 발생 확률 감소
- 장애 발생 시 빠른 재현 가능

---

#### 2. 실무 Tip

⭐ **Docker 사용 권장**
```
옛날 방식:
- MySQL 직접 설치 → 버전 관리 어려움
- 개발자마다 설정 다름

Docker 방식:
- docker-compose up → 1분 내 동일 환경
- 버전, 설정 모두 코드로 관리
```

⭐ **환경 변수로 비밀 정보 관리**
```
❌ 나쁜 예: application.yml에 비밀번호 직접
spring:
  datasource:
    password: admin1234  ← Git에 올리면 보안 사고!

✅ 좋은 예: 환경 변수 사용
spring:
  datasource:
    password: ${DB_PASSWORD}  ← 로컬에서만 설정
```

⭐ **README.md에 설치 방법 명시**
```
프로젝트 루트에 README.md 필수:
1. 필요한 도구 목록
2. 설치 순서
3. 실행 방법
4. 문제 해결 (Troubleshooting)
```

---

#### 3. 제안서/PT에서 설명하는 법

**개발 환경 설명 예시:**

> "SimpleBlog는 **Docker 기반 개발 환경**을 사용합니다.
>
> **장점:**
> - 신규 개발자 투입 시 **1시간 내** 개발 착수 가능
> - 개발 환경과 운영 환경의 **차이 제로**
> - CI/CD 파이프라인에 **즉시 통합** 가능
>
> **구성:**
> - Java 21 (Docker 불필요, 로컬 설치)
> - MySQL 8.0 (Docker 컨테이너)
> - Redis (2차 개발, Docker 컨테이너)"

---

#### 4. 공무원이 자주 하는 질문

**Q1: "Docker가 뭔가요? 꼭 써야 하나요?"**
A: "가상 컨테이너 기술입니다.
   개발자 PC와 서버 환경을 동일하게 만들어줍니다.
   '내 컴퓨터에서는 되는데요' 문제를 원천 차단합니다."

**Q2: "설치가 어렵지 않나요?"**
A: "Docker Desktop 설치 후 명령어 1줄이면 끝입니다.

   ```bash
   docker-compose up -d
   ```

   이 명령어로 MySQL, Redis 등 모두 자동 설치됩니다."

**Q3: "개발 서버가 따로 필요한가요?"**
A: "로컬 개발은 개발자 PC에서 합니다.
   개발 서버는 팀 통합 테스트용으로만 사용합니다.

   - 로컬: 개발자 PC (localhost)
   - 개발 서버: 팀 공용 (dev.example.com)
   - 운영 서버: 실제 서비스 (www.example.com)"

**Q4: "개발자마다 환경이 다르면 어떻게 하나요?"**
A: "그래서 이 문서를 작성했습니다.
   모든 개발자가 이 가이드를 따라 설정하면
   동일한 환경이 보장됩니다."

---

## 1. 개요

### 1.1 목적

SimpleBlog 프로젝트의 모든 개발자가 동일한 개발 환경에서 작업할 수 있도록 설정 방법을 표준화한다.

### 1.2 대상

- 백엔드 개발자 (Java/Spring Boot)
- 프론트엔드 개발자 (React - 2차 개발)
- 신규 투입 인력

---

## 2. 필수 설치 도구

### 2.1 Java Development Kit (JDK) 21

#### 설치 방법

**Windows:**
```bash
# 1. Adoptium (Eclipse Temurin) 다운로드
https://adoptium.net/

# 2. 설치 파일 실행
# - "Set JAVA_HOME" 체크
# - "Add to PATH" 체크

# 3. 설치 확인
java -version
# 출력 예시: openjdk version "21.0.1"
```

**macOS:**
```bash
# Homebrew 사용
brew install openjdk@21

# PATH 설정
echo 'export PATH="/opt/homebrew/opt/openjdk@21/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc

# 설치 확인
java -version
```

**Linux (Ubuntu):**
```bash
# OpenJDK 21 설치
sudo apt update
sudo apt install openjdk-21-jdk

# 설치 확인
java -version
```

---

### 2.2 Docker Desktop

#### 설치 방법

**Windows / macOS:**
```
1. https://www.docker.com/products/docker-desktop 접속
2. 운영체제에 맞는 설치 파일 다운로드
3. 설치 후 Docker Desktop 실행
4. 상태 표시줄에 Docker 아이콘 확인 (실행 중)
```

**설치 확인:**
```bash
docker --version
# 출력: Docker version 24.0.x

docker-compose --version
# 출력: Docker Compose version v2.x.x
```

**Linux (Ubuntu):**
```bash
# Docker 설치
sudo apt update
sudo apt install docker.io docker-compose

# 사용자 권한 추가 (sudo 없이 실행)
sudo usermod -aG docker $USER
# 로그아웃 후 재로그인 필요

# 설치 확인
docker --version
```

---

### 2.3 IDE: IntelliJ IDEA (권장)

#### 설치 방법

**Community Edition (무료):**
```
1. https://www.jetbrains.com/idea/download/ 접속
2. Community Edition 다운로드
3. 설치 후 실행
```

**Ultimate Edition (유료, 30일 무료 체험):**
```
Spring Boot 개발에 특화된 기능 제공:
- Spring Boot Dashboard
- HTTP Client (Postman 대체)
- Database Tools
```

**플러그인 설치:**
```
Settings → Plugins에서 설치:
1. Lombok
2. Rainbow Brackets
3. GitToolBox
4. SonarLint (코드 품질 검사)
```

#### 대안: VS Code

```
Extensions 설치:
1. Extension Pack for Java
2. Spring Boot Extension Pack
3. Docker
4. REST Client
```

---

### 2.4 Postman (API 테스트)

#### 설치 방법

```
1. https://www.postman.com/downloads/ 접속
2. 설치 파일 다운로드 및 실행
3. 계정 생성 (또는 Skip)
```

---

### 2.5 Git

#### 설치 방법

**Windows:**
```
https://git-scm.com/download/win
- Git Bash 포함 설치
```

**macOS:**
```bash
# Xcode Command Line Tools 설치
xcode-select --install

# 또는 Homebrew
brew install git
```

**Git 초기 설정:**
```bash
git config --global user.name "홍길동"
git config --global user.email "hong@example.com"

# 설정 확인
git config --list
```

---

## 3. 프로젝트 설정

### 3.1 프로젝트 생성 (Spring Initializr)

#### 방법 1: 웹사이트 사용

```
1. https://start.spring.io/ 접속
2. 설정:
   - Project: Gradle - Groovy
   - Language: Java
   - Spring Boot: 3.2.10 (안정 버전)
   - Project Metadata:
     * Group: com.simpleblog
     * Artifact: simpleblog
     * Name: simpleblog
     * Package name: com.simpleblog
     * Packaging: Jar
     * Java: 21

3. Dependencies 추가:
   - Spring Web
   - Spring Data JPA
   - MySQL Driver
   - Lombok
   - Spring Boot DevTools
   - Validation

4. Generate 버튼 클릭 → ZIP 다운로드
5. 압축 해제 후 IDE에서 열기
```

#### 방법 2: IntelliJ IDEA 사용

```
1. New Project → Spring Initializr
2. 위와 동일한 설정 입력
3. Finish
```

---

### 3.2 프로젝트 구조

```
simpleblog/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/simpleblog/
│   │   │       ├── SimpleblogApplication.java  ← 메인 클래스
│   │   │       ├── controller/                  ← REST API
│   │   │       ├── service/                     ← 비즈니스 로직
│   │   │       ├── repository/                  ← DB 접근
│   │   │       ├── entity/                      ← JPA Entity
│   │   │       └── dto/                         ← 요청/응답 객체
│   │   └── resources/
│   │       ├── application.yml                  ← 설정 파일
│   │       └── application-local.yml            ← 로컬 설정
│   └── test/
│       └── java/
│           └── com/simpleblog/
│               └── SimpleblogApplicationTests.java
├── build.gradle                                 ← Gradle 설정
├── docker-compose.yml                           ← Docker 설정
├── .gitignore
└── README.md
```

---

### 3.3 build.gradle 설정

```groovy
plugins {
    id 'java'
    id 'org.springframework.boot' version '3.2.10'
    id 'io.spring.dependency-management' version '1.1.6'
}

group = 'com.simpleblog'
version = '1.0.0'

java {
    sourceCompatibility = '21'
}

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    // Spring Boot Starters
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-validation'

    // Database
    runtimeOnly 'com.mysql:mysql-connector-j'

    // Lombok
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    // DevTools (자동 재시작)
    developmentOnly 'org.springframework.boot:spring-boot-devtools'

    // Test
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

tasks.named('test') {
    useJUnitPlatform()
}
```

---

### 3.4 application.yml 설정

**src/main/resources/application.yml:**
```yaml
spring:
  application:
    name: simpleblog

  profiles:
    active: local  # 기본 프로파일

  jpa:
    hibernate:
      ddl-auto: update  # 개발: update, 운영: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true

  # 로깅
  logging:
    level:
      com.simpleblog: DEBUG
      org.springframework.web: INFO
      org.hibernate.SQL: DEBUG
      org.hibernate.type.descriptor.sql.BasicBinder: TRACE

server:
  port: 8080
```

**src/main/resources/application-local.yml:**
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/simpleblog?serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: root
    password: admin1234
    driver-class-name: com.mysql.cj.jdbc.Driver
```

**보안 주의:**
```
application-local.yml은 .gitignore에 추가!
→ 비밀번호가 Git에 올라가면 안 됨

실제 비밀번호는 환경 변수로 관리:
password: ${DB_PASSWORD:admin1234}
```

---

### 3.5 docker-compose.yml 설정

**프로젝트 루트에 생성:**

```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0
    container_name: simpleblog-mysql
    restart: always
    environment:
      MYSQL_DATABASE: simpleblog
      MYSQL_ROOT_PASSWORD: admin1234
      MYSQL_CHARACTER_SET_SERVER: utf8mb4
      MYSQL_COLLATION_SERVER: utf8mb4_unicode_ci
      TZ: Asia/Seoul
    ports:
      - "3306:3306"
    volumes:
      - mysql-data:/var/lib/mysql
      - ./init-db.sql:/docker-entrypoint-initdb.d/init-db.sql
    command:
      - --character-set-server=utf8mb4
      - --collation-server=utf8mb4_unicode_ci

volumes:
  mysql-data:
```

**init-db.sql (초기 DB 스키마):**

```sql
-- 데이터베이스 생성 (이미 docker-compose에서 생성됨)
-- CREATE DATABASE IF NOT EXISTS simpleblog CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

USE simpleblog;

-- posts 테이블 생성
CREATE TABLE IF NOT EXISTS posts (
    id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '게시글 ID',
    title VARCHAR(200) NOT NULL COMMENT '제목',
    content TEXT NOT NULL COMMENT '내용',
    author VARCHAR(100) NOT NULL COMMENT '작성자',
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '작성일시',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
               ON UPDATE CURRENT_TIMESTAMP COMMENT '수정일시',
    INDEX idx_created_at (created_at DESC)
) ENGINE=InnoDB
  DEFAULT CHARSET=utf8mb4
  COLLATE=utf8mb4_unicode_ci
  COMMENT='게시글';

-- 샘플 데이터 삽입
INSERT INTO posts (title, content, author) VALUES
('SimpleBlog 오픈!', 'SimpleBlog 시스템이 오픈되었습니다.', '관리자'),
('첫 번째 게시글', '테스트 내용입니다.', '홍길동'),
('두 번째 게시글', '안녕하세요!', '김철수');
```

---

## 4. 실행 방법

### 4.1 MySQL 실행 (Docker)

```bash
# 1. Docker 컨테이너 시작
docker-compose up -d

# 2. 실행 확인
docker ps
# CONTAINER ID   IMAGE       PORTS
# xxxx           mysql:8.0   0.0.0.0:3306->3306/tcp

# 3. MySQL 접속 테스트
docker exec -it simpleblog-mysql mysql -uroot -padmin1234

# 4. 데이터베이스 확인
mysql> SHOW DATABASES;
mysql> USE simpleblog;
mysql> SHOW TABLES;
mysql> SELECT * FROM posts;
mysql> EXIT;
```

**중지 방법:**
```bash
# 컨테이너 중지
docker-compose down

# 컨테이너 + 볼륨 삭제 (데이터 초기화)
docker-compose down -v
```

---

### 4.2 Spring Boot 실행

#### 방법 1: IDE에서 실행 (IntelliJ)

```
1. SimpleblogApplication.java 열기
2. main() 메서드 왼쪽의 실행 버튼 클릭
3. 콘솔에서 "Started SimpleblogApplication" 확인
```

#### 방법 2: Gradle 명령어

```bash
# Windows
gradlew bootRun

# macOS / Linux
./gradlew bootRun
```

#### 실행 확인

```bash
# 브라우저에서 접속
http://localhost:8080

# 또는 curl
curl http://localhost:8080/api/posts
```

**예상 출력:**
```json
{
  "data": [
    {
      "id": 1,
      "title": "SimpleBlog 오픈!",
      "author": "관리자",
      "createdAt": "2025-10-17T09:00:00"
    }
  ]
}
```

---

## 5. 개발 도구 설정

### 5.1 IntelliJ IDEA 설정

#### 코드 스타일

```
Settings → Editor → Code Style → Java
- Tab size: 4
- Indent: 4
- Continuation indent: 8
- "Use tab character" 체크 해제 (스페이스 사용)
```

#### Lombok 활성화

```
Settings → Build, Execution, Deployment → Compiler → Annotation Processors
- "Enable annotation processing" 체크
```

#### 자동 import

```
Settings → Editor → General → Auto Import
- "Add unambiguous imports on the fly" 체크
- "Optimize imports on the fly" 체크
```

---

### 5.2 Git 설정

**.gitignore 내용:**

```gitignore
# Gradle
.gradle/
build/
!gradle/wrapper/gradle-wrapper.jar

# IntelliJ
.idea/
*.iml
*.iws
out/

# Eclipse
.classpath
.project
.settings/

# VS Code
.vscode/

# macOS
.DS_Store

# Windows
Thumbs.db

# 로컬 설정 (비밀번호 포함)
application-local.yml
application-dev.yml

# 로그 파일
*.log

# 임시 파일
*.tmp
*.bak
```

---

## 6. 문제 해결 (Troubleshooting)

### 6.1 MySQL 접속 오류

**증상:**
```
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure
```

**해결 방법:**

1. Docker 컨테이너 실행 확인
   ```bash
   docker ps
   # simpleblog-mysql이 보여야 함
   ```

2. MySQL 포트 확인
   ```bash
   netstat -an | grep 3306
   # 3306 포트가 LISTEN 상태여야 함
   ```

3. MySQL 비밀번호 확인
   ```yaml
   # application-local.yml
   password: admin1234  ← docker-compose.yml과 일치해야 함
   ```

---

### 6.2 Gradle 빌드 오류

**증상:**
```
Could not resolve all dependencies
```

**해결 방법:**

1. Gradle 캐시 삭제
   ```bash
   ./gradlew clean
   ```

2. Gradle 재빌드
   ```bash
   ./gradlew build --refresh-dependencies
   ```

3. IntelliJ 캐시 삭제
   ```
   File → Invalidate Caches → Invalidate and Restart
   ```

---

### 6.3 Port 8080 already in use

**증상:**
```
Web server failed to start. Port 8080 was already in use.
```

**해결 방법:**

1. 포트 사용 프로세스 확인
   ```bash
   # Windows
   netstat -ano | findstr :8080

   # macOS / Linux
   lsof -i :8080
   ```

2. 프로세스 종료
   ```bash
   # Windows
   taskkill /PID <PID번호> /F

   # macOS / Linux
   kill -9 <PID번호>
   ```

3. 또는 포트 변경
   ```yaml
   # application.yml
   server:
     port: 8081  ← 다른 포트로 변경
   ```

---

### 6.4 Lombok이 안 됨

**증상:**
```
Cannot resolve symbol 'builder'
Cannot resolve symbol 'getData'
```

**해결 방법:**

1. Lombok 플러그인 설치 확인
   ```
   Settings → Plugins → "Lombok" 검색 및 설치
   ```

2. Annotation Processing 활성화
   ```
   Settings → Build, Execution, Deployment → Compiler
   → Annotation Processors
   → "Enable annotation processing" 체크
   ```

3. IntelliJ 재시작

---

## 7. 개발 환경 점검 체크리스트

### 신규 개발자 온보딩 시 확인

```
[ ] Java 21 설치 완료 (java -version)
[ ] Docker Desktop 설치 및 실행 중
[ ] IntelliJ IDEA 설치 완료
[ ] Git 설치 및 설정 완료
[ ] Postman 설치 완료

[ ] 프로젝트 clone 완료
[ ] Gradle 빌드 성공 (./gradlew build)
[ ] Docker MySQL 실행 (docker-compose up -d)
[ ] MySQL 접속 테스트 완료

[ ] Spring Boot 실행 성공
[ ] http://localhost:8080 접속 확인
[ ] Postman으로 API 테스트 성공

[ ] Git 첫 commit 완료
[ ] IntelliJ 코드 스타일 설정 완료
[ ] Lombok 정상 작동 확인
```

---

## 8. 환경별 설정

### 8.1 개발 환경 (Local)

```yaml
# application-local.yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/simpleblog
  jpa:
    hibernate:
      ddl-auto: update  # 자동 테이블 생성/수정
    show-sql: true      # SQL 로그 출력
```

---

### 8.2 테스트 환경 (Dev Server)

```yaml
# application-dev.yml
spring:
  datasource:
    url: jdbc:mysql://dev-db.example.com:3306/simpleblog
  jpa:
    hibernate:
      ddl-auto: validate  # 스키마 검증만
    show-sql: false
```

---

### 8.3 운영 환경 (Production) - 2차

```yaml
# application-prod.yml
spring:
  datasource:
    url: jdbc:mysql://prod-db.example.com:3306/simpleblog
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false

logging:
  level:
    com.simpleblog: INFO  # 운영에서는 ERROR 또는 WARN 권장
```

---

## 9. 다음 단계

### 개발 환경 설정 완료 후

```
1. Entity 클래스 작성 (Post.java)
2. Repository 인터페이스 작성
3. Service 클래스 작성
4. Controller 클래스 작성
5. API 테스트 (Postman)
```

---

## 10. 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2025-10-17 | 개발팀 | 최초 작성 |

---

**다음 단계:** [6단계 백엔드 개발](../step6-development/) 🚀
